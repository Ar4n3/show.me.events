(function(e){e.fn.showEvents=function(t){var n=e.extend(e.fn.showEvents.defaults,t);if(!t.month){e.fn.showEvents.defaults.month=e.fn.showEvents.variables.date.getMonth()}else{e.fn.showEvents.defaults.month=t.month-1}if(!t.year){e.fn.showEvents.defaults.year=e.fn.showEvents.variables.date.getFullYear()}return this.each(function(){var t="<ul class='month'><li><span class='showEventsPrev'><a href='#'></a></span><span class='showDate'></span><span class='showEventsNext'><a href='#'></a></span></li></ul>";t+="<div class='days'><ul>";for(i=0;i<=6;i++){t+="<li>"+e.fn.showEvents.weekdayToString(i)+"</li>"}t+="</ul></div><div class='numdays'></div>";e(this).append(t);e.fn.showEvents.loadCalendar(e.fn.showEvents.eventsThisMonth(n.month,n.year));e(".showEventsPrev a").on("click",function(){if(e.fn.showEvents.defaults.month>0){e.fn.showEvents.defaults.month=e.fn.showEvents.defaults.month-1}else{e.fn.showEvents.defaults.month=11;e.fn.showEvents.defaults.year=e.fn.showEvents.defaults.year-1}e.fn.showEvents.loadCalendar(e.fn.showEvents.eventsThisMonth(n.month,n.year));return false});e(".showEventsNext a").on("click",function(){if(e.fn.showEvents.defaults.month<11){e.fn.showEvents.defaults.month=e.fn.showEvents.defaults.month+1}else{e.fn.showEvents.defaults.month=0;e.fn.showEvents.defaults.year=e.fn.showEvents.defaults.year+1}e.fn.showEvents.loadCalendar(e.fn.showEvents.eventsThisMonth(n.month,n.year));return false})})};e.fn.showEvents.defaults={month:null,year:null,events:null,showLang:"EN"};e.fn.showEvents.variables={date:new Date,numdays:null,dayFirst:new Date,dayLast:new Date};e.fn.showEvents.monthToString=function(t){if(e.fn.showEvents.defaults.showLang=="ES"){var n=new Array("enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre")}if(e.fn.showEvents.defaults.showLang=="EN"){var n=new Array("january","february","march","april","may","june","july","august","september","october","november","december")}return n[t].toUpperCase()};e.fn.showEvents.weekdayToString=function(t){if(e.fn.showEvents.defaults.showLang=="ES"){var n=new Array("lunes","martes","miércoles","jueves","viernes","sábado","domingo")}if(e.fn.showEvents.defaults.showLang=="EN"){var n=new Array("monday","tuesday","wednesday","thursday","friday","saturday","sunday")}return n[t]};e.fn.showEvents.eventsThisMonth=function(t,n){var r=e.fn.showEvents.defaults.events;var s=[];for(i=0;i<r.length;i++){if(r[i][0].split("-").length>2){if(r[i][0].split("-")[2]==n){if(r[i][0].split("-")[1]-1==t){s.push(r[i])}}}else{if(r[i][0].split("-")[1]-1==t){s.push(r[i])}}}return s};e.fn.showEvents.showDate=function(){var t="<span class='biggerFont'>"+e.fn.showEvents.monthToString(e.fn.showEvents.defaults.month)+"</span><br />"+e.fn.showEvents.defaults.year+" ";e(".showDate").html(t);e.fn.showEvents.variables.numdays=(new Date(e.fn.showEvents.defaults.year,e.fn.showEvents.defaults.month+1,0)).getDate();e.fn.showEvents.variables.dayFirst.setFullYear(e.fn.showEvents.defaults.year,e.fn.showEvents.defaults.month,1);e.fn.showEvents.variables.dayLast.setFullYear(e.fn.showEvents.defaults.year,e.fn.showEvents.defaults.month,e.fn.showEvents.variables.numdays)};e.fn.showEvents.loadCalendar=function(t){e.fn.showEvents.showDate();e(".numdays div").remove();e.fn.showEvents.variables.numdays=(new Date(e.fn.showEvents.defaults.year,e.fn.showEvents.defaults.month+1,0)).getDate();var n=e.fn.showEvents.variables.numdays;var r=e.fn.showEvents.variables.dayFirst.getDay();var s=e.fn.showEvents.variables.dayLast.getDay();var o=n/7;for(i=0,day=1,cell=0,row=0,rowData="";i<n;i++){if(cell==0){rowData+="<div class='row'>"}if(r==0){r=7}if(r==i+1&&n>0){rowData+="<div class='calendarDay'><p>"+day+"</p>";for(j=0;j<t.length;j++){if(t[j][0].split("-")[0]==day){rowData+="<a class='showEventsmark' href='"+j+"'><span style='display: none'>"+t[j][1]+"</span></a>"}}rowData+="</div>";r++;day++}else if(i<n){rowData+="<div></div>";n++}else{rowData+=""}if(cell==6){rowData+="</div>";cell=0;row++}else{cell++}}e(".numdays").append(rowData);e("a[href]").on({mouseenter:function(){if(e.isNumeric(e(this).attr("href"))){if(e.fn.showEvents.defaults.showLang=="ES"){var t="Haz click en la estrella para más info"}if(e.fn.showEvents.defaults.showLang=="EN"){var t="Click the star for more info"}e(".month li").append("<span class='tooltip'><p style='display:none'>"+e(this).children("span").text()+"<br/><small>"+t+"</small></p></span>");e(".tooltip").delay(100).animate({width:"56%"},function(){e(this).children().fadeIn(100)})}},mouseleave:function(){e(".tooltip p").fadeOut(0,function(){e(".tooltip").animate({width:"0%"},function(){e(this).remove()})})},click:function(){if(e.isNumeric(e(this).attr("href"))){var t=e(this).children().text();var n;var r;for(j=0;j<e.fn.showEvents.defaults.events.length;j++){if(e.fn.showEvents.defaults.events[j][1]==t&&e(this).attr("href")==j){n=e.fn.showEvents.defaults.events[j][2];r=e.fn.showEvents.defaults.events[j][3]}}e(".tooltip").hide(0,function(){e(this).remove();e(".calendario").append("<div class='boxyShow'><h1>"+t+"</h1><span class='address'>"+n+"</span><span class='text'><p>"+r+"</p></span><a href='#' class='showEventsclose' style='display: none'></a></div>");e(".boxyShow").children().hide();e(".boxyShow").animate({width:"100%"},function(){e(".showEventsclose").animate({width:"4%",height:"4%"});e(".boxyShow").children().fadeIn(100)});e(".showEventsclose").on("click",function(){e(".boxyShow").children().fadeOut(100);e(".boxyShow").animate({width:"0%"},function(){e(this).hide();e(this).remove()});return false})});return false}}})}})(jQuery)